{"version":3,"sources":["file:///Users/zhao/Desktop/test/cocos-creator/RollABall/assets/Scripts/Player.ts"],"names":["_decorator","Collider","Component","Input","input","KeyCode","RigidBody","Vec2","Vec3","ccclass","property","Player","moveDir","ZERO","rgb","collider","start","getComponent","node","on","onTriggerEnter","onTriggerExit","onTriggerStay","onLoad","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","KEY_PRESSING","onKeyPressing","onDestroy","off","event","otherNode","otherCollider","destroy","console","log","keyCode","KEY_W","x","KEY_S","KEY_A","y","KEY_D","update","deltaTime","pos","position","applyForce","multiplyScalar","moveForce"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,S,OAAAA,S;AAAsCC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAsBC,MAAAA,O,OAAAA,O;AAAoBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;;;;;;;;OACjI;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;wBAGjBW,M,WADZF,OAAO,CAAC,QAAD,C,2BAAR,MACaE,MADb,SAC4BT,SAD5B,CACsC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAO1BU,OAP0B,GAOVL,IAAI,CAACM,IAPK;AAAA,eAQ1BC,GAR0B,GAQT,IARS;AAAA,eAS1BC,QAT0B,GASL,IATK;AAAA;;AAWlCC,QAAAA,KAAK,GAAG;AACN,eAAKF,GAAL,GAAW,KAAKG,YAAL,CAAkBX,SAAlB,CAAX;AACA,eAAKS,QAAL,GAAgB,KAAKG,IAAL,CAAUD,YAAV,CAAuBhB,QAAvB,CAAhB;AACA,eAAKc,QAAL,CAAcI,EAAd,CAAiB,gBAAjB,EAAmC,KAAKC,cAAxC,EAAwD,IAAxD;AACA,eAAKL,QAAL,CAAcI,EAAd,CAAiB,eAAjB,EAAkC,KAAKE,aAAvC,EAAsD,IAAtD;AACA,eAAKN,QAAL,CAAcI,EAAd,CAAiB,eAAjB,EAAkC,KAAKG,aAAvC,EAAsD,IAAtD;AAED;;AAESC,QAAAA,MAAM,GAAS;AACrBnB,UAAAA,KAAK,CAACe,EAAN,CAAShB,KAAK,CAACqB,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACAtB,UAAAA,KAAK,CAACe,EAAN,CAAShB,KAAK,CAACqB,SAAN,CAAgBG,MAAzB,EAAiC,KAAKC,OAAtC,EAA+C,IAA/C;AACAxB,UAAAA,KAAK,CAACe,EAAN,CAAShB,KAAK,CAACqB,SAAN,CAAgBK,YAAzB,EAAuC,KAAKC,aAA5C,EAA2D,IAA3D;AACH;;AAESC,QAAAA,SAAS,GAAS;AACxB3B,UAAAA,KAAK,CAAC4B,GAAN,CAAU7B,KAAK,CAACqB,SAAN,CAAgBC,QAA1B,EAAoC,KAAKC,SAAzC,EAAoD,IAApD;AACAtB,UAAAA,KAAK,CAAC4B,GAAN,CAAU7B,KAAK,CAACqB,SAAN,CAAgBG,MAA1B,EAAkC,KAAKC,OAAvC,EAAgD,IAAhD;AACAxB,UAAAA,KAAK,CAAC4B,GAAN,CAAU7B,KAAK,CAACqB,SAAN,CAAgBK,YAA1B,EAAwC,KAAKC,aAA7C,EAA4D,IAA5D;AACA,eAAKf,QAAL,CAAciB,GAAd,CAAkB,gBAAlB,EAAoC,KAAKZ,cAAzC,EAAyD,IAAzD;AACA,eAAKL,QAAL,CAAciB,GAAd,CAAkB,eAAlB,EAAmC,KAAKX,aAAxC,EAAuD,IAAvD;AACA,eAAKN,QAAL,CAAciB,GAAd,CAAkB,eAAlB,EAAmC,KAAKV,aAAxC,EAAuD,IAAvD;AACH;;AAEDF,QAAAA,cAAc,CAACa,KAAD,EAAuB;AACnC,cAAMC,SAAS,GAAGD,KAAK,CAACE,aAAN,CAAoBjB,IAAtC;AACAgB,UAAAA,SAAS,CAACE,OAAV;AACD;;AAEDf,QAAAA,aAAa,CAACY,KAAD,EAAuB;AAClCI,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD;;AAEDhB,QAAAA,aAAa,CAACW,KAAD,EAAuB;AAClCI,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD;;AAGCZ,QAAAA,SAAS,CAACO,KAAD,EAAuB;AAC9B,kBAAQA,KAAK,CAACM,OAAd;AACE,iBAAKlC,OAAO,CAACmC,KAAb;AACE,mBAAK5B,OAAL,GAAe,IAAIL,IAAJ,CAAS,KAAKK,OAAL,CAAa6B,CAAtB,EAAyB,CAAC,CAA1B,CAAf;AACA;;AACF,iBAAKpC,OAAO,CAACqC,KAAb;AACE,mBAAK9B,OAAL,GAAe,IAAIL,IAAJ,CAAS,KAAKK,OAAL,CAAa6B,CAAtB,EAAyB,CAAzB,CAAf;AACA;;AACF,iBAAKpC,OAAO,CAACsC,KAAb;AACE,mBAAK/B,OAAL,GAAe,IAAIL,IAAJ,CAAS,CAAC,CAAV,EAAa,KAAKK,OAAL,CAAagC,CAA1B,CAAf;AACA;;AACF,iBAAKvC,OAAO,CAACwC,KAAb;AACE,mBAAKjC,OAAL,GAAe,IAAIL,IAAJ,CAAS,CAAT,EAAY,KAAKK,OAAL,CAAagC,CAAzB,CAAf;AACA;AAZJ,WAD8B,CAgB9B;;AACH;;AAEDhB,QAAAA,OAAO,CAACK,KAAD,EAAuB;AAC1B,kBAAQA,KAAK,CAACM,OAAd;AACE,iBAAKlC,OAAO,CAACmC,KAAb;AACE,mBAAK5B,OAAL,GAAe,IAAIL,IAAJ,CAAS,KAAKK,OAAL,CAAa6B,CAAtB,EAAyB,CAAzB,CAAf;AACA;;AACF,iBAAKpC,OAAO,CAACqC,KAAb;AACE,mBAAK9B,OAAL,GAAe,IAAIL,IAAJ,CAAS,KAAKK,OAAL,CAAa6B,CAAtB,EAAyB,CAAzB,CAAf;AACA;;AACF,iBAAKpC,OAAO,CAACsC,KAAb;AACE,mBAAK/B,OAAL,GAAe,IAAIL,IAAJ,CAAS,CAAT,EAAY,KAAKK,OAAL,CAAagC,CAAzB,CAAf;AACA;;AACF,iBAAKvC,OAAO,CAACwC,KAAb;AACE,mBAAKjC,OAAL,GAAe,IAAIL,IAAJ,CAAS,CAAT,EAAY,KAAKK,OAAL,CAAagC,CAAzB,CAAf;AACA;AAZJ,WAD0B,CAgB1B;;AAEH;;AAEDd,QAAAA,aAAa,CAACG,KAAD,EAAuB,CAChC;AACH;;AAIDa,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACxB,cAAMC,GAAG,GAAG,KAAK9B,IAAL,CAAU+B,QAAtB,CADwB,CAExB;AACA;AACE;;AACF,eAAKnC,GAAL,CAASoC,UAAT,CAAoB,IAAI1C,IAAJ,CAAS,KAAKI,OAAL,CAAa6B,CAAtB,EAAyB,CAAzB,EAA4B,KAAK7B,OAAL,CAAagC,CAAzC,EAA4CO,cAA5C,CAA2D,KAAKC,SAAhE,CAApB;AACD;;AApGiC,O,wEAEjC1C,Q;;;;;iBACc,C;;oFACdA,Q;;;;;iBACkB,E","sourcesContent":["import { _decorator, Collider, Component, EventKeyboard, EventTouch, Input, input, ITriggerEvent, KeyCode, log, Node, RigidBody, Vec2, Vec3 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n    @property\n    public speed = 5;\n    @property\n    public moveForce = 15;\n\n    private moveDir: Vec2 = Vec2.ZERO\n    private rgb: RigidBody = null\n    private collider: Collider = null\n\n    start() {\n      this.rgb = this.getComponent(RigidBody)\n      this.collider = this.node.getComponent(Collider)\n      this.collider.on('onTriggerEnter', this.onTriggerEnter, this);\n      this.collider.on('onTriggerExit', this.onTriggerExit, this);\n      this.collider.on('onTriggerStay', this.onTriggerStay, this);\n\n    }\n\n    protected onLoad(): void {\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n        input.on(Input.EventType.KEY_PRESSING, this.onKeyPressing, this);\n    }\n\n    protected onDestroy(): void {\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n        input.off(Input.EventType.KEY_PRESSING, this.onKeyPressing, this);\n        this.collider.off('onTriggerEnter', this.onTriggerEnter, this);\n        this.collider.off('onTriggerExit', this.onTriggerExit, this);\n        this.collider.off('onTriggerStay', this.onTriggerStay, this);\n    }\n\n    onTriggerEnter(event: ITriggerEvent) {\n      const otherNode = event.otherCollider.node\n      otherNode.destroy()\n    }\n\n    onTriggerExit(event: ITriggerEvent) {\n      console.log(\"onTriggerExit\");\n    }\n\n    onTriggerStay(event: ITriggerEvent) {\n      console.log(\"onTriggerStay\");\n    }\n\n\n      onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n          case KeyCode.KEY_W:\n            this.moveDir = new Vec2(this.moveDir.x, -1)\n            break\n          case KeyCode.KEY_S:\n            this.moveDir = new Vec2(this.moveDir.x, 1)\n            break\n          case KeyCode.KEY_A:\n            this.moveDir = new Vec2(-1, this.moveDir.y)\n            break\n          case KeyCode.KEY_D:\n            this.moveDir = new Vec2(1, this.moveDir.y)\n            break\n        }\n\n        // console.log(this.moveDir);\n    }\n\n    onKeyUp(event: EventKeyboard) {\n        switch (event.keyCode) {\n          case KeyCode.KEY_W:\n            this.moveDir = new Vec2(this.moveDir.x, 0)\n            break\n          case KeyCode.KEY_S:\n            this.moveDir = new Vec2(this.moveDir.x, 0)\n            break\n          case KeyCode.KEY_A:\n            this.moveDir = new Vec2(0, this.moveDir.y)\n            break\n          case KeyCode.KEY_D:\n            this.moveDir = new Vec2(0, this.moveDir.y)\n            break\n        }\n\n        // console.log(this.moveDir);\n\n    }\n\n    onKeyPressing(event: EventKeyboard) {\n        // console.log(event.keyCode);\n    }\n\n\n\n    update(deltaTime: number) {\n      const pos = this.node.position\n      // console.log(this.moveDir)\n      // if (!this.moveDir)  return\n        // this.node.setPosition(pos.x + this.moveDir.x * this.speed * deltaTime, pos.y, pos.z + this.moveDir.y * this.speed * deltaTime)\n      this.rgb.applyForce(new Vec3(this.moveDir.x, 0, this.moveDir.y).multiplyScalar(this.moveForce))\n    }\n}\n"]}