{"version":3,"sources":["file:///Users/zhao/Desktop/test/cocos-creator/RollABall/assets/Scripts/Player.ts"],"names":["_decorator","Component","Input","input","KeyCode","RigidBody","Vec2","Vec3","ccclass","property","Player","moveDir","ZERO","rgb","start","getComponent","onLoad","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","KEY_PRESSING","onKeyPressing","onDestroy","off","event","keyCode","KEY_W","x","KEY_S","KEY_A","y","KEY_D","update","deltaTime","pos","node","position","applyForce","multiplyScalar","moveForce"],"mappings":"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","sourcesContent":["import { _decorator, Component, EventKeyboard, Input, input, KeyCode, log, Node, RigidBody, Vec2, Vec3 } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n    @property\n    public speed = 5;\n    @property\n    public moveForce = 15;\n\n    private moveDir: Vec2 = Vec2.ZERO\n    private rgb: RigidBody = null\n\n    start() {\n      this.rgb = this.getComponent(RigidBody)\n    }\n\n    protected onLoad(): void {\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n        input.on(Input.EventType.KEY_PRESSING, this.onKeyPressing, this);\n    }\n\n    protected onDestroy(): void {\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n        input.off(Input.EventType.KEY_PRESSING, this.onKeyPressing, this);\n    }\n\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n          case KeyCode.KEY_W:\n            this.moveDir = new Vec2(this.moveDir.x, -1)\n            break\n          case KeyCode.KEY_S:\n            this.moveDir = new Vec2(this.moveDir.x, 1)\n            break\n          case KeyCode.KEY_A:\n            this.moveDir = new Vec2(-1, this.moveDir.y)\n            break\n          case KeyCode.KEY_D:\n            this.moveDir = new Vec2(1, this.moveDir.y)\n            break\n        }\n\n        // console.log(this.moveDir);\n    }\n\n    onKeyUp(event: EventKeyboard) {\n        switch (event.keyCode) {\n          case KeyCode.KEY_W:\n            this.moveDir = new Vec2(this.moveDir.x, 0)\n            break\n          case KeyCode.KEY_S:\n            this.moveDir = new Vec2(this.moveDir.x, 0)\n            break\n          case KeyCode.KEY_A:\n            this.moveDir = new Vec2(0, this.moveDir.y)\n            break\n          case KeyCode.KEY_D:\n            this.moveDir = new Vec2(0, this.moveDir.y)\n            break\n        }\n\n        // console.log(this.moveDir);\n\n    }\n\n    onKeyPressing(event: EventKeyboard) {\n        // console.log(event.keyCode);\n    }\n\n\n\n    update(deltaTime: number) {\n      const pos = this.node.position\n      // console.log(this.moveDir)\n      // if (!this.moveDir)  return\n        // this.node.setPosition(pos.x + this.moveDir.x * this.speed * deltaTime, pos.y, pos.z + this.moveDir.y * this.speed * deltaTime)\n      this.rgb.applyForce(new Vec3(this.moveDir.x, 0, this.moveDir.y).multiplyScalar(this.moveForce))\n    }\n}\n"]}